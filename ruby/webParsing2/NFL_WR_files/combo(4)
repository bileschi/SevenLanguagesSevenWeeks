if(!window.ucs){window.ucs={};}YUI.add("ucs-skip-to-search",function(A){A.namespace("ucs");A.ucs.SkipToSearch=function(B){this.skipLink=B;this.init();};A.ucs.SkipToSearch.prototype={init:function(){this.skipLink.on("click",this._focusSearch,this);this.skipLink.removeClass("yucs-activate");},_focusSearch:function(B){B.halt();A.one(".yucs-search input").focus();}};},"1.0",{requires:["node","event"]});YUI().use("node","ucs-skip-to-search",function(B){var A=new B.ucs.SkipToSearch(B.one(".yucs-skipto-search"));});YUI.add("ucs-menu-utils",function(A){A.namespace("ucs");var C='<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separator}",H='<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separator}",F="click",G="a",L="role",I="tabIndex",B="hide",D="iframe",J="ul",K="li",E="parentNode";A.ucs.MenuUtils=function(M){this.menu=M;this.panel=this.menu.one(J);this.init();};A.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.delegate(F,this._handleMenuClick,">a",this);this.menu.delegate(F,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(G).set(L,"button");this.panel.all(G).set(L,"menuitem");this.panel.set(L,"menu");this.panel.all("div,ul,li").set(L,"presentation");this.panel.set(I,-1);this.focusmanager=this.panel.plug(A.Plugin.NodeFocusManager,{descendants:G,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"li-selected",fn:function(M){return M.get(E);}},circular:true});},_destructAria:function(){this.panel.unplug(A.Plugin.NodeFocusManager);this.panel.one(G).set(I,0);},_handleMenuClick:function(M){M.halt();if(this.panel.hasClass(B)){this._accessShowMenu(M);}else{this._hideMenu();}},_handleKeyup:function(M){if(27===M.keyCode){this.menu.one(G).focus();this._hideMenu();}else{if(40===M.keyCode&&!this.keyedup){this.panel.one(G).focus();this.keyedup=true;}}},_handleKeydown:function(M){M.stopPropagation();if(40===M.keyCode){M.preventDefault();}},_handleDocumentClick:function(M){if(this.panel.contains(M.target)||M.target._node===this.panel._node||this.panel.hasClass(B)){return;}this._hideMenu();},_accessShowMenu:function(N){this._hideAllMenus();this._showMenu(N);this.panel.focus();this.documentClickHandle=A.on(F,this._handleDocumentClick,document.body,this);this.documentWheelHandle=A.on("mousewheel",this._hideAllMenus,document.body,this);var M=A.one(A.config.win);this.documentScrollHandle=M.on("scroll",this._hideAllMenus,document.body,this);},_showMenu:function(N){this.panel.removeClass(B);this._addIframeShim();var M=this.menu.one(D);if(M){M.removeClass(B);}},_position:function(){var M=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",M[0]);}this.panel.setStyle("top",M[1]+13);},_hideMenu:function(){this.panel.addClass(B);var M=this.menu.one(D);if(M){M.addClass(B);}if(this.documentClickHandle){this.documentClickHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var O=A.all(".yucs-menu ul"),M=A.all("yucs-menu iframe"),N=A.all(".yucs-notifications ul.ynotif-yahoo-panel");O.addClass(B);M.addClass(B);N.addClass(B);},_addIframeShim:function(){var M=A.all("select"),O=(A.UA.ie<=6),N;if(!O||(!M.size()>0)){return;}N=this.menu.one(D);if(!N){N=document.createElement(D);N=this.panel.get(E).insertBefore(N,this.panel);}N.className="yucs-shim";N.setStyle("position","absolute");N.setStyle("width",this.panel.getComputedStyle("width"));N.setStyle("height",this.panel.getComputedStyle("height"));N.setStyle("top",this.panel.getY()+"px");N.setStyle("border","0px none");},_addMenuGroup:function(N,P){if(!N.length){return;}N.reverse();for(var O=0,M=N.length;O<M;O++){if(P){N[O].isDebugItem=true;N[O].menuClass="debug-item";}else{N[O].isDebugItem=false;N[O].menuClass="minty-item";}this._addMenuItem(N[O]);}},_addMenuItem:function(O){var N=this.menu.one(J),M="";if(O.isDisabled){O.disabledAria='aria-disabled="true"';}else{O.disabledAria="";}switch(O.actionType){case"link":M=A.substitute(C,O,this._processTemplateValue);break;case"customEvent":M=A.substitute(H,O,this._processTemplateValue);break;default:break;}if(M){if(O.isDebugItem){M=M.replace(/separator/,"separator debug-item");}else{M=M.replace(/separator/,"separator minty-item");}N.prepend(M);}},_clearMenuItem:function(M){this.menu.one(J).all("."+M).each(function(N){N.remove(true);});},_processTemplateValue:function(M,N,O){A.log("key = "+M+" value = "+N+" meta_data = "+O);var P="";switch(M){case"icon":if(N!==undefined){if(N==="available"){P='<img src="http://l.yimg.com/a/lib/ush/icon.gif" class="yucs-opi available"/>';}else{if(N==="offline"){P='<img src="http://l.yimg.com/a/lib/ush/icon.gif" class="yucs-opi offline"/>';}else{if(N==="invisible"){P='<img src="http://l.yimg.com/a/lib/ush/icon.gif" class="yucs-opi invisible"/>';}else{if(N==="busy"){P='<img src="http://l.yimg.com/a/lib/ush/icon.gif" class="yucs-opi busy"/>';}else{if(N==="idle"){P='<img src="http://l.yimg.com/a/lib/ush/icon.gif" class="yucs-opi idle"/>';}else{P='<img src="'+N+'" />';}}}}}}break;case"separator":if(N){P='<span class="separator" role="presentation"></span>';}break;case"actionData":if(N){P='data-mad="'+N+'"';}break;case"isDisabled":if(N){P="disabled";}break;case"isActive":if(N){P="sp active";}break;default:P=N;break;}return P;},_resetItemStatus:function(P){var O=P.ancestor(J).all(K),N=P.ancestor(J).all("li.disabled");O.removeClass("sp active");N.removeClass("disabled");if(P.getAttribute("data-dis")){var M=P.ancestor(K);M.addClass("disabled");}if(P.getAttribute("data-hs")){var M=P.ancestor(K);M.addClass("sp active");}},_handleMenuItemClick:function(N){var M=N.target;}};},"1.0",{requires:["node","event","event-mouseenter","substitute","node-focusmanager"]});YUI().use("node","ucs-menu-utils",function(B){var A=B.one("#yUnivHead").all("li.yucs-menu.yucs-activate");A.each(function(D){var C=new B.ucs.MenuUtils(D);});});YUI.add("ucs-usermenu",function(C){var A="ucs:userMenuShow";var B="ucs:userMenuItemClick";C.ucs.UserMenu=function(D){C.ucs.UserMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};C.extend(C.ucs.UserMenu,C.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(A,{broadcast:2,emitFacade:true});this.publish(B,{broadcast:2,emitFacade:true});C.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this);},_showMenu:function(D){C.ucs.UserMenu.superclass._showMenu.apply(this,arguments);this.fire(A);},_handleUserMenuItems:function(H){if(!H.menuGroups||!H.menuGroups.length){return;}var F=H.menuGroups;F.reverse();if(H.reset){this._clearMenuItem("minty-item");}for(var G=0,E=F.length;G<E;G++){var D=F[G].length;F[G][D-1].separator=true;this._addMenuGroup(F[G]);}this._destructAria();this._initAria();},_handleMenuItemClick:function(I){C.ucs.UserMenu.superclass._handleMenuItemClick.apply(this,arguments);var H,F,D,E;H=I.target;H=H.ancestor("a",true);F=H.getAttribute("data-mad");D=H.getAttribute("data-customevt");E=H.ancestor("li").hasClass("disabled");if(D){I.preventDefault();}if(!E){var G={actionData:F};this.fire(B,G);}this._hideMenu();}});C.augment(C.ucs.UserMenu,C.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});YUI().use("node","ucs-usermenu",function(B){var A=B.all(".yucs-um-activate");A.each(function(D){var C=new B.ucs.UserMenu(D);});});YUI.add("ucs-helpmenu",function(E){var B="ucs:helpMenuShow";var A="ucs:helpDebugMenuShow";var D="ucs:helpMenuItemClick";var C="ucs:helpDebugMenuItemClick";E.ucs.HelpMenu=function(F){E.ucs.HelpMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};E.extend(E.ucs.HelpMenu,E.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(B,{broadcast:2,emitFacade:true});this.publish(A,{broadcast:2,emitFacade:true});this.publish(D,{broadcast:2,emitFacade:true});this.publish(C,{broadcast:2,emitFacade:true});E.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this);E.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this);},_showMenu:function(F){if((F.ctrlKey||F.metaKey)&&F.shiftKey){this.fire(A);this._showDebugMenuItems();}else{this.fire(B);this._showMenuItems();}E.ucs.HelpMenu.superclass._showMenu.apply(this,arguments);},_showDebugMenuItems:function(){this.menu.all("li").addClass("hide");this.menu.all("span.separator").setStyle("display","none");this.menu.all("li.debug-item").removeClass("hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.menu.all("li").removeClass("hide");this.menu.all("span.separator").setStyle("display","block");this.menu.all("li.debug-item").addClass("hide");this.menu.all("span.debug-item").setStyle("display","none");},_handleHelpMenuItems:function(J){if(!J.menuGroups||!J.menuGroups.length){return;}var H=J.menuGroups;H.reverse();if(J.reset){this._clearMenuItem("minty-item");}for(var I=0,G=H.length;I<G;I++){if(I>0){var F=H[I].length;H[I][F-1].separator=true;}this._addMenuGroup(H[I]);}this._destructAria();this._initAria();},_handleHelpDebugMenuItems:function(J){if(!J.menuGroups||!J.menuGroups.length){return;}var H=J.menuGroups;H.reverse();this._clearMenuItem("debug-item");for(var I=0,G=H.length;I<G;I++){if(I>0){var F=H[I].length;H[I][F-1].separator=true;}this._addMenuGroup(H[I],true);}},_handleMenuItemClick:function(K){E.ucs.HelpMenu.superclass._handleMenuItemClick.apply(this,arguments);var J,G,F;J=K.target;J=J.ancestor("a",true);G=J.getAttribute("data-mad");F=J.getAttribute("data-customevt");dis=J.ancestor("li").hasClass("disabled");if(dis){K.halt();this._hideMenu();return;}if(F){K.preventDefault();}if(!dis){var I={actionData:G};var H=J.get("parentNode");if(H.hasClass("debug-item")){this.fire(C,I);}else{this.fire(D,I);}}this._hideMenu();}});E.augment(E.ucs.HelpMenu,E.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});YUI().use("node","ucs-helpmenu",function(B){var A=B.all(".yucs-hm-activate");A.each(function(D){var C=new B.ucs.HelpMenu(D);});});YUI.add("ucs-utilitymenu",function(C){var B="ucs:utilityMenuShow";var A="ucs:utilityMenuItemClick";C.ucs.UtilityMenu=function(D){C.ucs.UtilityMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};C.extend(C.ucs.UtilityMenu,C.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(B,{broadcast:2,emitFacade:true});this.publish(A,{broadcast:2,emitFacade:true});C.Global.on("ucs:utilityMenuItems",this._handleUtilityMenuItems,this);},_showMenu:function(D){C.ucs.UtilityMenu.superclass._showMenu.apply(this,arguments);this.fire(B);},_handleUtilityMenuItems:function(H){if(!H.menuGroups||!H.menuGroups.length){return;}var F=H.menuGroups;F.reverse();if(H.reset){this._clearMenuItem("minty-item");}for(var G=0,E=F.length;G<E;G++){if(G>0){var D=F[G].length;F[G][D-1].separator=true;}this._addMenuGroup(F[G]);}this._destructAria();this._initAria();},_handleMenuItemClick:function(I){C.ucs.UtilityMenu.superclass._handleMenuItemClick.apply(this,arguments);var H,F,D,E;H=I.target;H=H.ancestor("a",true);F=H.getAttribute("data-mad");D=H.getAttribute("data-customevt");E=H.ancestor("li").hasClass("disabled");if(D){I.preventDefault();}if(!E){var G={actionData:F};this.fire(A,G);}this._hideMenu();}});C.augment(C.ucs.UtilityMenu,C.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});YUI().use("node","ucs-utilitymenu",function(B){var A=B.all(".yucs-utm-activate");A.each(function(D){var C=new B.ucs.UtilityMenu(D);});});YUI().use("node",function(C){ucsLogoDebug=function(D){D.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};ucsLogoDebug.prototype={_handleClick:function(D){if(D.altKey){D.halt();this.fire("ucs:logoDebug");}}};C.augment(ucsLogoDebug,C.EventTarget);var B=C.one("#yuhead-bd>.yuhead-logo>h2>a");if(B){var A=new ucsLogoDebug(B);}});YUI.add("ucs-set-homepage",function(A){A.namespace("ucs");A.ucs.SetHomepage=function(B){this.container=B;this.init();};A.ucs.SetHomepage.prototype={init:function(){this.anchor=this.container.one("a");if(A.UA.gecko){this.anchor.on("click",this._showPanel,this);}else{if(A.UA.ie>=6){this.anchor.on("click",this._setHpIe,this);}}this.container.removeClass("yucs-activate");},_showPanel:function(D){D.halt();var B=this.container.one("div.yucs-sethp-panel"),E=this.container.one("div.pnt"),C=B.one("a.yucs-sethp-panel-close");E.removeClass("hide");B.removeClass("hide");C.on("click",this._hidePanel,this);this._loadBeacon();},_hidePanel:function(C){C.halt();var B=this.container.one("div.yucs-sethp-panel"),D=this.container.one("div.pnt");D.addClass("hide");B.addClass("hide");},_loadBeacon:function(){var B=A.Node.create('<img width="0" height="0" src="http://us.lrd.yahoo.com/_ylc=X3oDMTFnNzFiMTJoBHRtX2RtZWNoA1RleHQgTGluawR0bV9sbmsDVTExMzA1NTYEdG1fbmV0A1lhaG9vIQ--/SIG=112cgufir/**http%3A/www.yahoo.com/%3Fmkt=3"/>');this.container.insert(B);},_setHpIe:function(C){C.halt();this.anchor.setStyle("behavior","url(#default#homepage)");this.anchor._node.setHomePage(this.container.one("a.yucs-sethp-panel-logo").getAttribute("href"));var B=A.one("#yucs-procframe");if(!B){B=A.Node.create('<iframe id="yucs-procframe" src="'+encodeURI(this.container.getAttribute("data-detectscript"))+"?hp="+encodeURI(this.container.one("a.yucs-sethp-panel-logo").getAttribute("href"))+"&hpid=1&ygma_rd=&ygma_space=&ygma_space2=&ygma_space3=&ygma_adid=uh-ucs&ygma_prop="+encodeURI(this.container.getAttribute("data-prop"))+'"></iframe>');B.setAttribute("name","yucs-procframe");B.setAttribute("frameborder","0");B.setStyle("width","0");B.setStyle("height","0");}this.container.insert(B);this._loadBeacon();}};},"1.0",{requires:["node","event"]});YUI().use("node","ucs-set-homepage",function(B){var A=new B.ucs.SetHomepage(B.one(".yucs-sethp.yucs-activate"));});YUI.add("ucs-search",function(E){if(!ucs.Search){var C="value",D="click",B="submit",F="innerHTML",A="target";ucs.Search=function(G){this.form=G;this.loadedAssist=false;this.init();};ucs.Search.prototype={init:function(){var G=this.form.all("button");if(G.size()===2){this.is2Button=true;}else{this.is2Button=false;}this.input=this.form.one("input");this.vertSearchBtn=this.form.one(".yucs-sprop-btn");this.webSearchBtn=this.form.one(".yucs-sweb-btn");this.searchHint=this.input.getAttribute("data-sh");if((E.one("#yUnivHead")&&E.one("#yUnivHead").getAttribute("data-linktarget"))){this.linkTarget=E.one("#yUnivHead").getAttribute("data-linktarget");}else{this.linkTarget="_top";}this._setFormTarget();this._initEventListeners();this.form.removeClass("yucs-activate");if(this.input.get(C)===""){this.input.set(C,this.input.getAttribute("data-sh"));}},_initEventListeners:function(){if(this.vertSearchBtn&&E.UA.ie){this.webSearchBtn.on(D,this._renderSearchActionIe,this);this.form.on(B,this._handleVertSearch,this);}else{this.form.on(B,this._handleSubmit,this);}this.input.on("focus",this._handleInputFocus,this);this.input.on("blur",this._handleInputBlur,this);if(this.vertSearchBtn){this.vertSearchBtn.on(D,this._handleVertSearch,this);}},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(A,"searchWin");}else{this.form.setAttribute(A,this.linkTarget);}},_renderSearchActionIe:function(){var G=this;E.detach(B,this._fireVertSearchEvent,this.form);this._handleSubmit();var H=this.form.getAttribute("action")+"?fr="+this.form.all("#fr").getAttribute(C)+"&p="+this.input.getAttribute(C);if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")||this.is2Button){window.open(H,"searchWin");}else{window.location.href=H;}},_initAssist:function(){var G=this.input.getAttribute("data-satype");if(6===E.UA.ie||7===E.UA.ie){G="";}switch(G){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(G){var H={searchbox:G,clid:"uh-yui3",align:true,shim:1};if(G.getAttribute("data-pubid")){H.pubid=G.getAttribute("data-pubid");}if(G.getAttribute("data-gosurl")){H.url=G.getAttribute("data-gosurl");}return H;},_initMiniAssist:function(I){var H=this,G={miniassist:{fullpath:"http://l.yimg.com/a/lib/s7/miniassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:"http://l.yimg.com/a/lib/s7/miniassist-yui3-201009101433.css",type:"css"},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["miniassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["miniassist"]}};YUI({modules:G}).use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin",function(L){var J=new L.Node(I),K=H._buildAssistConfig(J);H.sa=new L.Search.MiniAssist(K);});},_initRichAssist:function(I){var H=this,G={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};YUI({modules:G}).use("richassist","tray-align-plugin","tray-shim-plugin",function(L){var J=new L.Node(I),K=H._buildAssistConfig(J);H.sa=new L.Search.RichAssist(K);});},_handleSubmit:function(H){var G=this.input.get(C);G=E.Lang.trim(G);if(G===this.searchHint){this.input.set(C,"");}},_handleInputFocus:function(I){var H=this.input,G=H.get(C);G=E.Lang.trim(G);if(G===this.searchHint){H.set(C,"");}H.removeClass("yucs-search-hint-color");if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}},_handleInputBlur:function(I){var H=this.input,G=H.get(C);G=E.Lang.trim(G);if(G===""){H.set(C,this.searchHint);H.addClass("yucs-search-hint-color");}},_handleVertSearch:function(I){I.preventDefault();this._handleSubmit();var H=I.target.getAttribute("data-vsearch"),G=I.target.getAttribute("data-ylt");if(H){H+="?fr="+this.form.all("#fr").get(C)+"&p="+this.input.get(C);if(G){if(G.charAt(0)==="/"){G=G.substring(1);}H+=G;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(H,"searchWin");}else{window.location.href=H;}}else{this._fireVertSearchEvent(I);}},_fireVertSearchEvent:function(H){var G=this.input.get(C);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":G});},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){this.input.set(C,this.searchHint);this.input.addClass("yucs-search-hint-color");},_setSearchInput:function(G){this.input.set(C,G);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(F);},_setVertSearchBtnContent:function(G){this.vertSearchBtn.set(F,(G["text"])?G["text"]:G);}};E.augment(ucs.Search,E.EventTarget);}},"1.0",{requires:["node","event","event-custom"]});YUI().use("node","ucs-search",function(B){var A=B.all("form.yucs-search.yucs-activate");A.each(function(F,C,E){if(F.ancestor("#yuhead-search")){if(F.ancestor("#yucs-fh")){if(F.all("button").size()===2){B.one("#yucs-fh").addClass("yucs-fh-twobutton");}}ucs.UhSearchInterface=new ucs.Search(F);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(G){ucs.UhSearchInterface._setSearchInput(G);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(G){ucs.UhSearchInterface._setVertSearchBtnContent(G);
};ucs.UhSearchInterface._fireInterfaceReady();}else{var D=new ucs.Search(F);}});});